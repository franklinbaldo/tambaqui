[![Abrir no Codespaces](https://github.com/codespaces/badge.svg)](https://github.com/codespaces/new?repo=franklinbaldo/tambaqui)

# Tambaqui - Financial Update Calculator

## Project Purpose

This project provides a tool to calculate financial updates based on the official Brazilian TJSP (SÃ£o Paulo Court of Justice) correction factors. It fetches the latest factors, processes them, and allows users to calculate updated values through a web interface. This is particularly useful for legal and financial professionals in Brazil who need to apply monetary correction to values based on TJSP's official tables.

## How `gerar_tabelas.py` Works

The Python script `gerar_tabelas.py` is responsible for obtaining and processing the correction factor data:

1.  **Downloads PDF**: It automatically downloads the latest PDF document containing the correction factors directly from the TJSP website.
2.  **Parses Tables**: Using the `camelot-py` library, it extracts the tables embedded within the PDF document.
3.  **Processes Data**: The script then processes the extracted data, transforming it into a structured format where each month and year has an associated correction factor.
4.  **Saves Data**: Finally, it saves this structured data into two formats:
    *   `tabela_de_atualizacao_ec113.json`: A JSON file used by the web interface to perform calculations.
    *   `tabela_de_atualizacao_ec113.csv`: A CSV file for users who might want to use the data in spreadsheets or other analysis tools.

The script includes error handling to manage issues during PDF fetching, parsing, or data processing, and provides logging output for monitoring its execution.

## How to Use `index.html`

The `index.html` file provides a user-friendly web interface to calculate financial updates:

1.  **Open the File**: Open `index.html` in any modern web browser.
2.  **Input Data**:
    *   **Update From**: Enter the original date of the monetary value (in YYYY-MM-DD format). This is the date from which the correction will start.
    *   **Update To**: Enter the target date to which you want to correct the value (in YYYY-MM-DD format).
    *   **Description**: Add a brief description for the financial entry (e.g., "Rent payment").
    *   **Amount (USD)**: Input the original monetary amount. (Note: While the label says USD for now, the factors are Brazilian Reais based; this is a UI label).
3.  **Add Entry**: Click the "Add Entry" button.
4.  **View Results**: The calculated updated amount will be displayed in the table below. The table will list all entries you've added, their original amounts, and their corresponding corrected values. You can also delete entries from the table.

The interface uses the `tabela_de_atualizacao_ec113.json` file (generated by `gerar_tabelas.py`) as its data source for the correction factors.

## Automated Daily Updates

A GitHub Actions workflow is configured for this repository. This workflow automatically runs the `gerar_tabelas.py` script every day. This ensures that the `tabela_de_atualizacao_ec113.json` and `tabela_de_atualizacao_ec113.csv` files are kept up-to-date with the latest correction factors published by the TJSP, without requiring manual intervention.
